(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[595],{2425:function(e,t,a){Promise.resolve().then(a.bind(a,7987)),Promise.resolve().then(a.bind(a,7130))},7987:function(e,t,a){"use strict";a.d(t,{ArchiveForm:function(){return F}});var r=a(7437),s=a(2265),n=a(6460),i=a(4241),d=a(8637),l=a(4817),o=a(7440),c=a(495),m=a(518),u=a(7592),f=a(3045);function x(e){let{className:t,classNames:a,showOutsideDays:s=!0,...n}=e;return(0,r.jsx)(f._W,{showOutsideDays:s,className:(0,o.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,o.cn)((0,c.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,o.cn)((0,c.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,r.jsx)(m.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,r.jsx)(u.Z,{className:"h-4 w-4"})}},...n})}x.displayName="Calendar";var p=a(1520),h=a(1485);let g=h.fC,b=h.xz,y=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:n=4,...i}=e;return(0,r.jsx)(h.h_,{children:(0,r.jsx)(h.VY,{ref:t,align:s,sideOffset:n,className:(0,o.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});y.displayName=h.VY.displayName;var j=a(4867),v=a(6291);let w=v.fC,N=v.ZA,k=v.B4,_=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(v.xz,{ref:t,className:(0,o.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(v.JO,{asChild:!0,children:(0,r.jsx)(j.jnn,{className:"w-4 h-4 opacity-50"})})]})});_.displayName=v.xz.displayName;let z=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(j.g8U,{})})});z.displayName=v.u_.displayName;let C=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(j.v4q,{})})});C.displayName=v.$G.displayName;let M=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...i}=e;return(0,r.jsx)(v.h_,{children:(0,r.jsxs)(v.VY,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,r.jsx)(z,{}),(0,r.jsx)(v.l_,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(C,{})]})})});M.displayName=v.VY.displayName;let R=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.__,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",a),...s})});R.displayName=v.__.displayName;let O=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(v.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(v.wU,{children:(0,r.jsx)(j.nQG,{className:"w-4 h-4"})})}),(0,r.jsx)(v.eT,{children:s})]})});O.displayName=v.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=v.Z0.displayName;var P=a(2447),U=a(5226),Z=a(5444),S=a(2585),V=a(5273);let W=(0,a(7818).default)(()=>Promise.all([a.e(562),a.e(382)]).then(a.bind(a,9382)),{loadableGenerated:{webpack:()=>[9382]},ssr:!1});function T(e){let{data:t,day:a}=e;return(0,r.jsxs)("div",{className:"pt-20",children:[a&&(0,r.jsxs)("h3",{className:"mt-10 mb-3 text-2xl font-semibold tracking-tight scroll-m-20 md:px-16 lg:px-96",children:["Dati del giorno ",(0,n.WU)(a,"dd-MM-yy")]}),(0,r.jsx)(Z.F,{children:t.map((e,t)=>e.tabs.length>1?(0,r.jsx)(S.Z,{...e},t):(0,r.jsx)(U.Z,{title:e.title,value:e.tabs[0].value,unit:e.unit,subtitle:"Valore di media"},t))})]})}function Y(e){let{data:t,day:a}=e;console.log(t);let s=t.graphs[0].data.map((e,t)=>new Date(a.getTime()-864e5*(30-t))).map(e=>(0,n.WU)(e,"dd/MM"));return(0,r.jsxs)("div",{className:"pt-20",children:[(0,r.jsxs)("h3",{className:"mt-10 mb-3 text-2xl font-semibold tracking-tight scroll-m-20 md:px-16 lg:px-96",children:["Dati del mese di ",(0,n.WU)(a,"dd-MM")," /"," ",(0,n.WU)(new Date(a.getTime()-2592e6),"dd-MM")]}),(0,r.jsx)(T,{data:t.overview}),(0,r.jsx)(Z.W,{children:(0,r.jsxs)(V.mQ,{defaultValue:t.graphs[0].name,children:[(0,r.jsx)(P.dr,{className:"grid grid-cols-".concat(t.graphs.length," w-[100%] py-2 rounded-lg *:text-xs md:text-sm dark:bg-background/20"),children:t.graphs.map((e,t)=>(0,r.jsxs)(V.SP,{value:e.name,children:[e.name[0].toUpperCase(),e.name.slice(1)]},t))}),t.graphs.map((e,t)=>(0,r.jsx)(V.nU,{value:e.name,children:(0,r.jsx)(W,{...e,IsInView:!0,days:s})},t))]})})]})}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overview",a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return Number((a.reduce((e,a)=>e+Number(a[t]),0)/a.length).toFixed(1))};if("overview"===t)return[{title:"Temperatura",tabs:[{key:"Minima",value:a("lowTemp")},{key:"Media",value:a("tempOut")},{key:"Massima",value:a("hiTemp")}],unit:"\xb0C"},{title:"Umidita'",tabs:[{key:"Media",value:a("outHum")}],unit:"%"},{title:"Precipitazioni",tabs:[{key:"Media",value:a("rain")}],unit:"mm"},{title:"Pressione",tabs:[{key:"Media",value:a("bar")}],unit:"hPa"}];if("graph"===t){let t=(()=>{let t={};for(let a of e){let e=(0,n.WU)(new Date(a.data),"yyyy-MM-dd");t[e]||(t[e]=[]),t[e].push(a)}return t})();return[{name:"Temperatura",data:Object.values(t).map(e=>a("tempOut",e)),unit:"\xb0C"},{name:"Umidit\xe0",data:Object.values(t).map(e=>a("outHum",e)),unit:"%"},{name:"Pressione",data:Object.values(t).map(e=>a("bar",e)),unit:"hPa"},{name:"Precipitazioni",data:Object.values(t).map(e=>a("rain",e)),unit:"mm"}]}}function F(){let[e,t]=s.useState(),[a,m]=s.useState(null),[u,f]=s.useState(null);async function h(){e&&a&&("day"===a&&await fetch("/api/day",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({day:(0,n.WU)(e,"yyyy-MM-dd")})}).then(e=>e.json()).then(e=>{console.log(e),f(D(e))}),"month"===a&&await fetch("/api/month",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({day:(0,n.WU)(e,"yyyy-MM-dd")})}).then(e=>e.json()).then(e=>{f({overview:D(e),graphs:D(e,"graph")}),console.log(e)}))}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,r.jsxs)(g,{children:[(0,r.jsx)(b,{asChild:!0,children:(0,r.jsxs)(c.z,{variant:"outline",className:(0,o.cn)("w-[280px] justify-start text-left font-normal rounded-3xl shadow-md shadow-input dark:shadow-none dark:bg-stone-900/[0.5] dark:border-border/20 bg-white border border-zinc-200/50",!e&&"text-muted-foreground "),children:[(0,r.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),e?(0,n.WU)(e,"PPP",{locale:p.it}):(0,r.jsx)("span",{children:"Scegli una data"})]})}),(0,r.jsx)(y,{className:"w-auto p-0",children:(0,r.jsx)(x,{mode:"single",selected:e,onSelect:t,initialFocus:!0})})]}),(0,r.jsxs)(w,{onValueChange:e=>m(e),children:[(0,r.jsxs)(_,{className:"w-[180px] rounded-3xl shadow-md shadow-input dark:shadow-none dark:bg-stone-900/[0.5] dark:border-border/20 bg-white border border-zinc-200/50",children:[(0,r.jsx)(k,{placeholder:"Modalit\xe0",className:"text-white"}),(0,r.jsx)("p",{className:"sr-only",children:"Modalit\xe0 di ricerca "})]}),(0,r.jsx)(M,{className:"w-[180px] rounded-xl shadow-md shadow-input dark:shadow-none dark:bg-stone-900 dark:border-border/20 bg-white border border-zinc-200/50 pb-3",children:(0,r.jsxs)(N,{className:"px-2",children:[(0,r.jsx)(R,{className:"-px-1",children:"Modalit\xe0"}),(0,r.jsx)(O,{className:"text-md",value:"month",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(i.Z,{className:"w-3 h-3 me-2"}),"Mensile"]})}),(0,r.jsx)(O,{className:"text-md",value:"day",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(d.Z,{className:"w-3 h-3 me-2"}),"Giornaliera"]})})]})})]}),(0,r.jsx)(c.z,{className:"border shadow-md rounded-2xl shadow-input dark:shadow-none dark:border-border/20 border-zinc-200/50",onClick:h,children:(0,r.jsx)(l.Z,{className:"w-4 h-4"})})]}),u&&"day"===a?(0,r.jsx)(T,{data:u||[],day:e}):u&&"month"===a&&(0,r.jsx)(Y,{data:u,day:e||new Date})]})}},5226:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(7437);a(2265);var s=a(6013);function n(e){let{title:t,icon:a,value:n,unit:i,subtitle:d}=e;return(0,r.jsxs)(s.Zb,{className:"flex flex-col justify-between bg-accent border-zinc-700/50",children:[(0,r.jsx)(s.Ol,{children:(0,r.jsx)(s.ll,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold tracking-tight scroll-m-20",children:t}),a||" "]})})}),(0,r.jsx)(s.aY,{className:"pb-3",children:(0,r.jsxs)("h4",{className:"text-3xl font-semibold tracking-tight scroll-m-20",children:[n,(0,r.jsx)("sup",{className:"font-normal ms-2",children:i})]})}),(0,r.jsx)(s.eW,{children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:d})})]})}},5444:function(e,t,a){"use strict";a.d(t,{F:function(){return n},W:function(){return i}});var r=a(7437),s=a(7440);function n(e){let{children:t}=e;return(0,r.jsx)("div",{className:"px-5 m-auto grid max-w-screen-md gap-4 lg:max-w-screen-lg md:grid-cols-2 md:px-0",children:t})}function i(e){let{children:t,className:a}=e;return(0,r.jsx)("div",{className:(0,s.cn)(a,"max-w-screen-md p-4 bg-accent m-auto mt-10 border rounded-lg border-zinc-700/50 lg:max-w-screen-lg"),children:t})}a(2265)},7130:function(e,t,a){"use strict";a.d(t,{default:function(){return n}});var r=a(7437),s=a(2378);function n(){return(0,r.jsx)(s.EA.div,{className:"relative flex items-center justify-center lg:max-w-[80%] m-auto my-56",initial:{scale:0,y:100},animate:{scale:1,y:0},children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsxs)("h1",{className:"mb-5 text-4xl tracking-tight text-center scroll-m-20 xl:text-8xl lg:text-7xl md:text-6xl",children:["Storico dei"," ",(0,r.jsx)("span",{className:"font-bold tracking-wide text-primary mr-4",children:"dati"}),"meteorologici"]}),(0,r.jsx)("p",{className:"text-lg font-light text-center lg:text-3xl md:text-xl text-muted-foreground",children:"Seleziona una data o un mese per visualizzare i dati meteorologici"})]})})}},2585:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(7437),s=a(2265),n=a(6013),i=a(5273),d=a(495);function l(e){let{tabs:t,title:a,icon:l,unit:o}=e,[c,m]=(0,s.useState)(t[0].key);return(0,r.jsx)(i.mQ,{value:c,onValueChange:m,children:(0,r.jsxs)(n.Zb,{className:"bg-accent border-zinc-700/50",children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold tracking-tight scroll-m-20",children:a}),(0,r.jsx)(i.dr,{className:"flex items-center bg-transparent",children:t.map((e,t)=>(0,r.jsx)(i.SP,{value:e.key,className:"!bg-transparent !shadow-none",children:(0,r.jsx)(d.z,{variant:"outline",size:"icon",className:"w-4 h-4 rounded-full ".concat(e.key===c&&"bg-primary hover:bg-primary")})},t))}),l||" "]}),(0,r.jsx)("p",{className:"text-sm font-normal text-muted-foreground ms-0.5"})]})}),t.map((e,t)=>(0,r.jsxs)(i.nU,{value:e.key,children:[(0,r.jsx)(n.aY,{className:"pb-3",children:(0,r.jsxs)("h4",{className:"text-3xl font-semibold tracking-tight scroll-m-20",children:[e.value,(0,r.jsx)("sup",{className:"font-normal ms-2",children:o})]})}),(0,r.jsx)(n.eW,{children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Valore di ",c.toLocaleLowerCase()]})})]},t))]})})}},495:function(e,t,a){"use strict";a.d(t,{d:function(){return l},z:function(){return o}});var r=a(7437),s=a(2265),n=a(1538),i=a(2218),d=a(7440);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:o=!1,...c}=e,m=o?n.g7:"button";return(0,r.jsx)(m,{className:(0,d.cn)(l({variant:s,size:i,className:a})),ref:t,...c})});o.displayName="Button"},6013:function(e,t,a){"use strict";a.d(t,{Ol:function(){return d},Zb:function(){return i},aY:function(){return o},eW:function(){return c},ll:function(){return l}});var r=a(7437),s=a(2265),n=a(7440);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});d.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});l.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});o.displayName="CardContent";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});c.displayName="CardFooter"},5273:function(e,t,a){"use strict";a.d(t,{SP:function(){return o},dr:function(){return l},mQ:function(){return d},nU:function(){return c}});var r=a(7437),s=a(2265),n=a(2447),i=a(7440);let d=n.fC,l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});l.displayName=n.aV.displayName;let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});o.displayName=n.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});c.displayName=n.VY.displayName},7440:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(4839),s=a(6164);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[310,641,378,559,814,524,971,23,744],function(){return e(e.s=2425)}),_N_E=e.O()}]);