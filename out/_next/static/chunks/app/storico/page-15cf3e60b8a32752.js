(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[595],{420:function(e,a,t){Promise.resolve().then(t.bind(t,2627))},2627:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return W}});var r=t(7437),s=t(6460),i=t(4241),n=t(8637),d=t(4817),l=t(7440),o=t(495),c=t(2265),m=t(518),u=t(7592),x=t(3045);function p(e){let{className:a,classNames:t,showOutsideDays:s=!0,...i}=e;return(0,r.jsx)(x._W,{showOutsideDays:s,className:(0,l.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,l.cn)((0,o.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{...a}=e;return(0,r.jsx)(m.Z,{className:"w-4 h-4"})},IconRight:e=>{let{...a}=e;return(0,r.jsx)(u.Z,{className:"w-4 h-4"})}},...i})}p.displayName="Calendar";var f=t(1520),h=t(1485);let g=h.fC,y=h.xz,j=c.forwardRef((e,a)=>{let{className:t,align:s="center",sideOffset:i=4,...n}=e;return(0,r.jsx)(h.h_,{children:(0,r.jsx)(h.VY,{ref:a,align:s,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});j.displayName=h.VY.displayName;var b=t(6294),N=t(5524),w=t(7171),v=t(933),_=t(5444),k=t(2585),z=t(5226),Z=t(4344),M=t(5176),P=t(7296),U=t(721),A=t(9702),C=t(2387);let D=e=>{var a;let{data:t,lastUpdate:i,monthData:n}=e,{status:d,icon:l}=(0,U.GE)({temperature:t.temp[0].value,humidity:t.humidity[0].value,pressure:t.pressure[0].value});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"px-4 mb-8 col-span-full",children:(0,r.jsx)(_.W,{children:n?(0,r.jsxs)("div",{className:"flex w-full justify-center items-center gap-2 text-center",children:[(0,r.jsx)(v.Z,{className:"text-primary"}),(0,r.jsxs)("h4",{className:"font-normal tracking-tight text-md md:text-lg scroll-m-20",children:[" ","Rilevazione del mese:"," ",(0,r.jsxs)("span",{className:"font-semibold",children:[(0,s.WU)(i.split("\xab")[0],"dd LLLL",{locale:f.it})," ","-"," ",(0,s.WU)(i.split("\xab")[1],"dd LLLL",{locale:f.it})]})]})]}):(0,r.jsxs)("div",{className:"relative w-full space-y-4 md:flex md:justify-between md:space-y-0 ",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[l,(0,r.jsxs)("h4",{className:"text-lg font-normal tracking-tight scroll-m-20",children:["Il meteo del giorno \xe8"," ",(0,r.jsx)("span",{className:"font-semibold",children:d.toLowerCase()})]})]}),(0,r.jsx)(Z.Z,{orientation:"vertical",className:"absolute hidden h-8 -translate-x-1/2 -translate-y-1/2 md:block bg-primary/20 left-1/2 top-1/2"}),(0,r.jsx)(Z.Z,{orientation:"horizontal",className:"block md:hidden absolute w-full -translate-x-1/2 -translate-y-1/2 bg-primary/20 left-1/2 top-1/2 !-mt-0"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"text-primary"}),(0,r.jsxs)("h4",{className:"font-normal tracking-tight text-md md:text-lg scroll-m-20",children:[" ","Rilevazione del:"," ",(0,r.jsx)("span",{className:"font-semibold",children:(0,s.WU)(i,"dd MMMM yyyy",{locale:f.it})})]})]})]})})}),(0,r.jsx)(_.F,{children:Object.keys(t).map((e,a)=>{if("delta"===e||"windDir"===e||"windSpeed"===e||"daily"===e)return;let s=e[0].toUpperCase()+e.slice(1),i=M.dP[s]({stroke:"#17A34A"});return"rain"===e?(0,r.jsx)(z.Z,{title:P.ll[e],value:t[e],icon:(0,r.jsx)(M.yO.Rainy,{stroke:"#17A34A"}),unit:P.dp[e],subtitle:n?"Pioggia totale mese":"Pioggia del giorno"},e+a):(0,r.jsx)(k.Z,{title:P.ll[e],tabs:[{key:"Media",value:t[e][0].value},t[e][1],t[e][2]],unit:P.dp[e],icon:i,sub:t.delta[e]},e+a)})}),n?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.F,{className:"!mt-4",children:["windDir","windSpeed"].map((e,a)=>(0,r.jsx)(z.Z,{title:P.ll[e],value:t[e],icon:(0,r.jsx)(M.dP.Wind,{stroke:"#17A34A"}),unit:P.dp[e],subtitle:"Informazioni vento del giorno"},e+a))}),(0,r.jsx)("div",{className:"mt-4 px-5 md:px-0 ",children:t.daily&&(0,r.jsx)(A.Z,{title:"giornata",inViewLoad:!1,graphs:{...t.daily},days:null===(a=t.daily)||void 0===a?void 0:a.times})})]}),(0,r.jsx)("div",{className:"justify-center px-5 m-auto mt-10 max-w-screen-lg lg:px-0",children:n&&(0,r.jsx)(C.Z,{...n,title:"mese"})})]})};D.displayName="ArchiveOverview";var F=t(7570);function R(){let[e,a]=(0,c.useState)(new Date),[t,m]=(0,c.useState)("month"),u=(0,N.D)({mutationFn:async()=>{let a=await fetch("api/storico?giorno=".concat((0,s.WU)(e,"yyyy-MM-dd")),{method:"GET",headers:{"Content-Type":"application/json"}}),r=await a.json();if("day"===t){let e=r.rilevazioniGiornaliere;return{lastUpdate:e.at(-1).data,data:(0,F.aP)(e,(0,F.fz)(e))}}{let e=r.rilevazioniUltimi30Giorni;return{data:{temp:(0,F.IF)(e,"Temperatura"),humidity:(0,F.IF)(e,"Umidita"),pressure:(0,F.IF)(e,"Pressione"),rain:Number(e.map(e=>Number(e.pioggiaGiornaliera)).reduce((e,a)=>e+a,0).toFixed(2)),delta:{temp:(0,F.QD)(e,"Temperatura"),humidity:(0,F.QD)(e,"Umidita"),pressure:(0,F.QD)(e,"Pressione"),rain:(0,F.QD)(e,"pioggiaGiornaliera")}},lastUpdate:e[0].data+"\xab"+e.at(-1).data,monthData:{graphs:{temp:[{name:"max",color:"#f87171",data:e.map(e=>Number(e.maxTemperatura))},{name:"med",color:"#17A34A",data:e.map(e=>Number(e.temperaturaMedia))},{name:"min",color:"#22d3ee",data:e.map(e=>Number(e.minTemperatura))}],humidity:[{name:"max",color:"#f87171",data:e.map(e=>Number(e.maxUmidita))},{name:"med",color:"#17A34A",data:e.map(e=>Number(e.umiditaMedia))},{name:"min",color:"#22d3ee",data:e.map(e=>Number(e.minUmidita))}],pressure:[{name:"max",color:"#f87171",data:e.map(e=>Number(e.maxPressione))},{name:"med",color:"#17A34A",data:e.map(e=>Number(e.pressioneMedia))},{name:"min",color:"#22d3ee",data:e.map(e=>Number(e.minPressione))}],rain:e.map(e=>Number(e.pioggiaGiornaliera))},days:e.map(e=>(0,s.WU)(e.data,"dd/MM"))}}}}});return(0,c.useEffect)(()=>{u.data||u.mutate()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-32 grid md:grid-cols-[2fr_1fr_0.2fr] gap-4 max-w-screen-md m-auto px-4 ",children:[(0,r.jsxs)(g,{children:[(0,r.jsx)(y,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"outline",className:(0,l.cn)("w-[280px] col-span-2  md:col-span-1 m-auto justify-start text-left font-normal rounded-3xl shadow-md shadow-input dark:shadow-none dark:bg-stone-900/[0.5] dark:border-border/20 bg-white border border-zinc-200/50",!e&&"text-muted-foreground "),children:[(0,r.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),e?(0,s.WU)(e,"PPP",{locale:f.it}):(0,r.jsx)("span",{children:"Scegli una data"})]})}),(0,r.jsx)(j,{className:"w-auto p-0",children:(0,r.jsx)(p,{mode:"single",selected:e,onSelect:e=>a(e),initialFocus:!0})})]}),(0,r.jsxs)(b.Ph,{defaultValue:"month",onValueChange:e=>m(e),children:[(0,r.jsxs)(b.i4,{className:"w-[180px] rounded-3xl shadow-md shadow-input dark:shadow-none dark:bg-stone-900/[0.5] dark:border-border/20 bg-white border border-zinc-200/50",children:[(0,r.jsx)(b.ki,{placeholder:"Modalit\xe0",className:"text-white","aria-label":"Seleziona una modalit\xe0"}),(0,r.jsx)("p",{className:"sr-only",children:"Modalit\xe0 di ricerca "})]}),(0,r.jsx)(b.Bw,{className:"w-[180px] rounded-xl shadow-md shadow-input dark:shadow-none dark:bg-stone-900 dark:border-border/20 bg-white border border-zinc-200/50 pb-3",children:(0,r.jsxs)(b.DI,{className:"px-2",children:[(0,r.jsx)(b.n5,{className:"-px-1",children:"Modalit\xe0"}),(0,r.jsx)(b.Ql,{className:"text-md",value:"month",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(i.Z,{className:"w-3 h-3 me-2"}),"Mensile"]})}),(0,r.jsx)(b.Ql,{className:"text-md",value:"day",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(n.Z,{className:"w-3 h-3 me-2"}),"Giornaliera"]})})]})})]}),(0,r.jsxs)(o.z,{className:"border shadow-md rounded-2xl shadow-input dark:shadow-none dark:border-border/20 border-zinc-200/50",onClick:()=>u.mutate(),children:[(0,r.jsx)(d.Z,{className:"w-4 h-4"}),(0,r.jsx)("p",{className:"sr-only",children:"Cerca"})]})]}),u.isPending&&(0,r.jsx)(w.Z,{}),u.isError&&(0,r.jsx)("div",{children:JSON.stringify(u.error)}),u.isSuccess&&(0,r.jsx)(D,{...u.data})]})}var S=t(3691);function G(){return(0,r.jsx)(S.EA.div,{className:"relative flex items-center justify-center lg:max-w-[80%] m-auto my-56",initial:{scale:0,y:100},animate:{scale:1,y:0},children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsxs)("h1",{className:"mb-5 text-4xl tracking-tight text-center scroll-m-20 xl:text-8xl lg:text-7xl md:text-6xl",children:["Storico dei"," ",(0,r.jsx)("span",{className:"font-bold tracking-wide text-primary mr-4",children:"dati"}),"meteorologici"]}),(0,r.jsx)("p",{className:"text-lg font-light text-center lg:text-3xl md:text-xl text-muted-foreground",children:"Seleziona una data o un mese per visualizzare i dati meteorologici"})]})})}var L=t(6094),I=t(3191);let O=new L.S;function W(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G,{}),(0,r.jsx)(I.aH,{client:O,children:(0,r.jsx)(R,{})})]})}},6294:function(e,a,t){"use strict";t.d(a,{Bw:function(){return p},DI:function(){return o},Ph:function(){return l},Ql:function(){return h},i4:function(){return m},ki:function(){return c},n5:function(){return f}});var r=t(7437),s=t(2265),i=t(4867),n=t(7539),d=t(7440);let l=n.fC,o=n.ZA,c=n.B4,m=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(n.xz,{ref:a,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[s,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(i.jnn,{className:"w-4 h-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(i.g8U,{})})});u.displayName=n.u_.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(i.v4q,{})})});x.displayName=n.$G.displayName;let p=s.forwardRef((e,a)=>{let{className:t,children:s,position:i="popper",...l}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,r.jsx)(u,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(x,{})]})})});p.displayName=n.VY.displayName;let f=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.__,{ref:a,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t),...s})});f.displayName=n.__.displayName;let h=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(n.ck,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(i.nQG,{className:"w-4 h-4"})})}),(0,r.jsx)(n.eT,{children:s})]})});h.displayName=n.ck.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=n.Z0.displayName}},function(e){e.O(0,[310,967,287,741,59,25,640,592,971,23,744],function(){return e(e.s=420)}),_N_E=e.O()}]);