(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2703:function(e,t,i){Promise.resolve().then(i.bind(i,1368))},1368:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return G}});var s=i(7437),a=i(3691),l=i(5066),n=i(9512),r=i(5747);function d(e){let{scrollRef:t}=e,{theme:i}=(0,n.F)();return(0,s.jsxs)("div",{className:"absolute bottom-0 hover:cursor-pointer",onClick:()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})},children:[(0,s.jsx)(r.Z,{width:"300",height:300,cx:"150",cy:150,rx:"30",ry:"30",startOffset:0,reversed:!1,text:"SCROLL - SCROLL - SCROLL -",textProps:{style:{fontSize:12}},textPathProps:{fill:"dark"===i?"#ffffff":"#000"},tspanProps:{dy:"13"},ellipseProps:null,svgProps:{className:"rotating-curved-text"}}),(0,s.jsx)(l.Z,{className:"absolute transform -translate-x-1/2 -translate-y-1/2 text-primary top-1/2 left-1/2"}),(0,s.jsx)("span",{className:"sr-only",children:"Scroll to weather info"})]})}function o(e){let{scrollRef:t}=e;return(0,s.jsxs)(a.EA.div,{className:"relative flex flex-col items-center justify-center h-dvh",initial:{scale:0,y:100},animate:{scale:1,y:0},children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("h1",{className:"text-3xl font-extrabold tracking-tight scroll-m-20 lg:text-8xl md:text-6xl",children:["Meteo ",(0,s.jsx)("span",{className:"text-primary",children:" Vallauri"})," Velletri"]}),(0,s.jsx)("p",{className:"text-center text-md lg:text-3xl md:text-xl text-muted-foreground",children:"Benvenuto. Su questo sito potrai trovare le condizioni climatiche di Velletri."})]}),(0,s.jsx)(d,{scrollRef:t})]})}var m=i(882);let c=m.fC,x=m.wy,u=m.Fw;var h=i(5444),p=i(993),f=i(2421),j=i(2265),v=i(4361);function y(e){let{icon:t,max:i,min:a,day:l,day2:n}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between text-primary-foregroud",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[t,(0,s.jsx)(v.Z,{text:"Max / Min",children:(0,s.jsxs)("div",{className:"cursor-pointer grid items-baseline grid-cols-[1fr_0.3fr_1fr] ms-3",children:[(0,s.jsxs)("h2",{className:"w-[60px] text-3xl md:text-4xl md:w-[80px] font-semibold tracking-tight scroll-20",children:[i,(0,s.jsx)("sup",{children:"\xb0"})]}),(0,s.jsx)("p",{className:"text-lg text-muted-foreground w-[20px] text-center",children:"/"}),(0,s.jsxs)("p",{className:"text-lg text-muted-foreground",children:[a,(0,s.jsx)("sup",{children:"\xb0"})]})]})})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-baseline",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold tracking-tight md:text-4xl scroll-m-20",children:l}),(0,s.jsx)("p",{className:"text-sm ms-2 text-muted-foreground",children:n})]})})]})}var g=i(495);function N(e){let{title:t,min:i,max:l,days:n}=e,[r,d]=(0,j.useState)(!1);return(0,s.jsx)(h.W,{className:"order-2 col-span-2 lg:m-0 lg:h-full",children:(0,s.jsxs)(c,{open:r,onOpenChange:d,className:"flex flex-col space-y-3 lg:h-full lg:justify-between",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("h4",{className:"text-2xl font-semibold",children:["Informazioni sulla ",t]})}),(0,s.jsxs)(a.EA.div,{className:"space-y-3",initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5},children:[(0,s.jsx)(y,{icon:(0,s.jsx)(p.Z,{stroke:"#17A34A"}),max:l[6],min:i[6],day:n[6]}),(0,s.jsx)(y,{icon:(0,s.jsx)(p.Z,{stroke:"#17A34A"}),max:l[5],min:i[5],day:n[5]}),(0,s.jsx)(y,{icon:(0,s.jsx)(p.Z,{stroke:"#17A34A"}),max:l[4],min:i[4],day:n[4]}),(0,s.jsx)(u,{children:(0,s.jsxs)(a.EA.div,{variants:{hidden:{opacity:0,scaleY:0},visible:{opacity:1,scaleY:1}},initial:"hidden",animate:r?"visible":"hidden",transition:{duration:.5,type:"spring"},className:"space-y-3",children:[(0,s.jsx)(y,{icon:(0,s.jsx)(p.Z,{stroke:"#17A34A"}),max:l[3],min:i[3],day:n[3]}),(0,s.jsx)(y,{icon:(0,s.jsx)(p.Z,{stroke:"#17A34A"}),max:l[2],min:i[2],day:n[2]}),(0,s.jsx)(y,{icon:(0,s.jsx)(p.Z,{stroke:"#17A34A"}),max:l[1],min:i[1],day:n[1]}),(0,s.jsx)(y,{icon:(0,s.jsx)(p.Z,{stroke:"#17A34A"}),max:l[0],min:i[0],day:n[0]})]})})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(x,{asChild:!0,children:(0,s.jsxs)(g.z,{children:[(0,s.jsx)(a.EA.div,{animate:r?"open":"closed",variants:{open:{rotate:180},closed:{rotate:0}},children:(0,s.jsx)(f.Z,{})}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle"})]})})})]})})}var b=i(933),w=i(2585),A=i(5226),k=i(4344),z=i(9702),Z=i(5176),R=i(7296),C=i(721);let P=(0,j.forwardRef)((e,t)=>{let{data:i,lastUpdate:l}=e,{status:n,icon:r}=(0,C.GE)({temperature:i.temp[0].value,humidity:i.humidity[0].value,pressure:i.pressure[0].value}),[d,o]=(0,j.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"px-4 mb-8 col-span-full",ref:t,children:(0,s.jsx)(h.W,{children:(0,s.jsxs)("div",{className:"relative w-full space-y-4 md:flex md:justify-between md:space-y-0 ",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[r,(0,s.jsxs)("h4",{className:"text-lg font-normal tracking-tight scroll-m-20",children:["Il meteo \xe8 attualmente"," ",(0,s.jsx)("span",{className:"font-semibold",children:n.toLowerCase()})]})]}),(0,s.jsx)(k.Z,{orientation:"vertical",className:"absolute hidden h-8 -translate-x-1/2 -translate-y-1/2 md:block bg-primary/20 left-1/2 top-1/2"}),(0,s.jsx)(k.Z,{orientation:"horizontal",className:"block md:hidden absolute w-full -translate-x-1/2 -translate-y-1/2 bg-primary/20 left-1/2 top-1/2 !-mt-0"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"text-primary"}),(0,s.jsxs)("h4",{className:"font-normal tracking-tight text-md md:text-lg scroll-m-20",children:[" ","Ultima rilevazione:"," ",(0,s.jsx)("span",{className:"font-semibold",children:l})]})]})]})})}),(0,s.jsxs)(c,{open:d,onOpenChange:o,children:[(0,s.jsx)(h.F,{children:Object.keys(i).map((e,t)=>{if("delta"===e||"windDir"===e||"windSpeed"===e||"daily"===e)return;let a=e[0].toUpperCase()+e.slice(1),l=Z.dP[a]({stroke:"#17A34A"});return"rain"===e?(0,s.jsx)(A.Z,{title:R.ll[e],value:i[e],icon:(0,s.jsx)(Z.yO.Rainy,{stroke:"#17A34A"}),unit:R.dp[e],subtitle:"Pioggia odierna"},e+t):(0,s.jsx)(w.Z,{title:R.ll[e],tabs:i[e],unit:R.dp[e],icon:l,sub:i.delta[e]},e+t)})}),(0,s.jsx)(a.EA.div,{variants:{hidden:{opacity:0,y:-20},visible:{opacity:1,y:0}},initial:"hidden",animate:d?"visible":"hidden",transition:{duration:.6,type:"just"},className:"mt-4 space-y-3",children:(0,s.jsx)(u,{children:(0,s.jsxs)(h.F,{className:"grid-cols-1  md:!grid-cols-5",children:[(0,s.jsx)("div",{className:"col-span-3 *:mt-0 *:h-full row-span-2",children:i.daily&&(0,s.jsx)(z.Z,{title:"giornata",inViewLoad:!1,graphs:i.daily,lessX:!0,days:i.daily.times})}),["windDir","windSpeed"].map((e,t)=>(0,s.jsx)("div",{className:"col-span-3 *:h-full md:col-span-2 ",children:(0,s.jsx)(A.Z,{title:R.ll[e],value:i[e],icon:(0,s.jsx)(Z.dP.Wind,{stroke:"#17A34A"}),unit:R.dp[e],subtitle:"Informazioni vento odierne"},e+t)},t))]})})}),(0,s.jsx)(m.wy,{className:"w-full mt-4",children:(0,s.jsxs)(g.z,{children:[(0,s.jsx)(v.Z,{text:d?"Mostra meno informazioni":"Mostra pi\xf9 informazioni",children:(0,s.jsx)(a.EA.div,{animate:d?"open":"closed",variants:{open:{rotate:180},closed:{rotate:0}},children:(0,s.jsx)(f.Z,{})})}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle"})]})})]})]})});P.displayName="HeroOverview";var E=i(7476),S=i(9805),M=i(8962);function O(e){let{children:t}=e,i=(0,j.useRef)(null),a=(0,E.Y)(i,{once:!1}),l=(0,S._)();return(0,j.useEffect)(()=>{a&&l.start("visible")},[a]),(0,s.jsx)(M.E.div,{ref:i,variants:{hidden:{scale:0,y:75},visible:{scale:1,y:0}},initial:"hidden",animate:l,transition:{duration:.5},children:t})}var T=i(6460),V=i(1520),F=i(7171),H=i(932),U=i(7570),_=i(2387);let L=async()=>{let e=await fetch("api/db",{method:"GET",next:{revalidate:300}});if(!e.ok)throw Error("Failed to fetch");return e.json()};function W(){let e=(0,j.useRef)(null),{data:t,error:i,isLoading:a}=(0,H.a)({queryKey:["fetchWeather"],queryFn:L});if(a||i)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{scrollRef:e}),(0,s.jsx)(F.Z,{ref:e})]});let l={temp:(0,U.C8)(t,"temperatura"),humidity:(0,U.C8)(t,"umidita"),pressure:(0,U.C8)(t,"pressione"),windDir:t.ultimaRilevazione.direzioneVentoUltimaRilevazione,windSpeed:t.ultimaRilevazione.velocitaVentoUltimaRilevazione,rain:t.ultimaRilevazione.pioggiaGiornaliera,delta:(0,U.dv)(t),daily:(0,U.fz)(t.rilevazioniGiornaliere)},n={temp:(0,U.Nx)(t,"temperatura"),minTemp:(0,U.Nx)(t,"minTemperatura"),maxTemp:(0,U.Nx)(t,"maxTemperatura"),humidity:(0,U.Nx)(t,"umidita"),minHumidity:(0,U.Nx)(t,"minUmidita"),maxHumidity:(0,U.Nx)(t,"maxUmidita"),rain:(0,U.Nx)(t,"pioggia"),pressure:(0,U.Nx)(t,"pressione"),minPressure:(0,U.Nx)(t,"minPressione"),maxPressure:(0,U.Nx)(t,"maxPressione")},r=new Date(t.ultimaRilevazione.data);r.setHours(t.ultimaRilevazione.ora.split(":")[0]),r.setMinutes(t.ultimaRilevazione.ora.split(":")[1]);let d=(0,T.WU)(r,"dd MMMM, HH:mm",{locale:V.it}),m=t.giorniSettimanaCorrente.map(e=>(0,T.WU)(e,"dd/MM"));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{scrollRef:e}),(0,s.jsx)(O,{children:(0,s.jsx)(P,{ref:e,data:l,lastUpdate:d})}),(0,s.jsxs)("div",{className:"justify-center px-5 m-auto mt-10 max-w-screen-lg lg:grid-cols-5 lg:grid lg:gap-x-4 lg:px-0",children:[(0,s.jsx)(N,{title:"settimana",min:null==n?void 0:n.minTemp,max:null==n?void 0:n.maxTemp,days:m}),(0,s.jsx)(_.Z,{title:"settimana",graphs:{temp:[{name:"max",color:"#f87171",data:null==n?void 0:n.maxTemp},{name:"med",color:"#17A34A",data:null==n?void 0:n.temp},{name:"min",color:"#22d3ee",data:null==n?void 0:n.minTemp}],humidity:[{name:"max",color:"#f87171",data:null==n?void 0:n.maxHumidity},{name:"med",color:"#17A34A",data:null==n?void 0:n.humidity},{name:"min",color:"#22d3ee",data:null==n?void 0:n.minHumidity}],pressure:[{name:"max",color:"#f87171",data:null==n?void 0:n.maxPressure},{name:"med",color:"#17A34A",data:null==n?void 0:n.pressure},{name:"min",color:"#22d3ee",data:null==n?void 0:n.minPressure}],rain:null==n?void 0:n.rain},days:m})]})]})}var D=i(6094),I=i(3191);let Y=new D.S;function G(){return(0,s.jsx)(I.aH,{client:Y,children:(0,s.jsx)(W,{})})}},4361:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var s=i(7437),a=i(2265),l=i(7071),n=i(7440);let r=l.zt,d=l.fC,o=l.xz,m=a.forwardRef((e,t)=>{let{className:i,sideOffset:a=4,...r}=e;return(0,s.jsx)(l.VY,{ref:t,sideOffset:a,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...r})});function c(e){let{children:t,text:i}=e;return(0,s.jsx)(r,{delayDuration:200,children:(0,s.jsxs)(d,{children:[(0,s.jsx)(o,{asChild:!0,children:t}),(0,s.jsx)(m,{className:"rotate-0 ",children:i})]})})}m.displayName=l.VY.displayName}},function(e){e.O(0,[967,287,741,25,71,91,592,971,23,744],function(){return e(e.s=2703)}),_N_E=e.O()}]);